sudo: false

language: scala

scala:
  - "2.10.7"
  - "2.11.12"
  - "2.12.4"

jdk: "oraclejdk8"

cache:
  directories:
    - $HOME/.ivy2/cache
    - $HOME/.sbt

before_cache:
  # Cleanup the cached directories to avoid unnecessary cache updates
  - find $HOME/.ivy2/cache -name "ivydata-*.properties" -print -delete
  - find $HOME/.sbt        -name "*.lock"               -print -delete

before_install:
- if [ $TRAVIS_PULL_REQUEST = 'false' ]; then
  openssl aes-256-cbc -K $encrypted_778c1fd0666a_key -iv $encrypted_778c1fd0666a_iv -in travis/secrets.tar.enc -out travis/local.secrets.tar -d;
  tar xv -C travis -f travis/local.secrets.tar;
  fi

script:
  - "sbt ++$TRAVIS_SCALA_VERSION clean scalastyle test:scalastyle it:scalastyle coverage test it:test coverageReport"

after_success:
- bash <(curl -s https://codecov.io/bash)
- if [ $TRAVIS_PULL_REQUEST = 'false' ]; then sbt ++$TRAVIS_SCALA_VERSION releaseEarly;
  fi

deploy:
  on:
    tags: true

env:
  global:
  - secure: CttHGMxYcittdkKlvFfPV6h/BOcwOZhHO91yqAj8ukqVBd+62PUJzplJ0OOeBd6ODa/xvNd2HnWoy5ouSqyyZPzM+2eUr4FIVC3dyD/QJq9UVFpkCqgWHrVuO5pmm8rFDUtY5F4v37MFL9RSHzgZ0RtLDFLeal/YBY874Di/wkC7899POiJAeKrCpnUAg2+N4SfKBbP38vydb11TMXOUIZ2HXzRCDjvNdOAEPnWfpM//6J4FLCrxdgexT1cp803nuWX7DBc+l0apI377s3CUhXPburYt8V8NRXo7sR6KvLXkjA7DXxJiqH4rs4xfvFJbZ+L/9uT/gvwGyzK2qEOOu/4qqEaIVX5zYXYu/fhH/UIVefazZ3ZM91lMVlYFeY/9AbZ1/7xVWJvZWkds6u3WIqZJRGKHfkAfAoQhJmv+neSz3lE6P2t732vkIXIjyCh+gF9n1EuZjpUZwzbs/zfwv061bVVxa3V5ZvK0gfq2DB6FG+YRe89EBY4mwrRVlpMo9iOswhUz1ZHEgkR6AVjLwsS3SPzuGuIBVJP9uRbZA+OVKuzmrYijU6WmdKWN7bOmSPuT5rklNU2y9BuC63gD0Tku8Sc+yZVfYK/k+PSL4fHaaarZgeOpLShj4dOPp8jYGP79p5gyb7doK156fPVBNgtYrG2RGrLeGfK5Dl+boeA=
  - secure: iUAO8r8VMcXjeAdBuldgW31xluq0DvFv50Qs2UuD3gTFm7iRkEo4uoV/+PRz637rlvfJhbe+qmlPSvLQFVkVw8h2GniXm22LfYeNI95k/uybBtwdk4ExseSvA4eFEPVrSwhrspLKGWZiP4oZu8k3oWroCPgjzSnTTp5JS50M0UF9CjN9KJJGqapA04r82j12DMdZwGW63BdNwotXf0uJ7D1uF41K5Ubd+G/I1HlseWVZFKV9smcQe8dKGV+VdzHXt7VCZanak1HNNZAgPGVVkqm2WOzEdLK9mlVyQ81Rn7/1F2o8QciKdL2gVgs/l/2KF9wqRbGazS6lhfm9yt6YH8PYhSDx/ytB7WEDjAmT62342tragfPioiaHVOH48ctnMVTdnRgoFeRrQCCWzHvS42FYhQ5m8ATMD0T++kwkQjalRzm2BM44LvCa1/MaCc6YoNEvuOxZ5zUxmguUq5zifXYNNJCHZLxfBDMc08/KZ2oAsYtuoqGEKs+pcWlmHcjGAnHHI8iCbigSJtHEz0Apj825w3ySXfTfzo8SKGwT4SiHmFHvzceQ058JrxZkLi4tFK0GHBPoDLfNTvNhnvVq83r+xyrve0TtPrGPAoQ0gw5uR5H29jFI6FCAFb5qrGqQiZmQWnK99i7ZfcRBKGPFAz5F4YXe/7X2DG0mIdBtefs=
  - secure: MARhx+/MCg133VsgV7zccP0ioOK36vg26PxKghIMQVGRu2tKFlFuncRdYCjMBVKhAfGb47dy81p7JljAzeO2bQv+xuRi3B6RvwvpRXBv8Ra9KEQ290HI7FDSeoCRJ8SXeM+54/fET9VNF+DDEBjIhKt12O00yqC4WBpCoPYdMtny08I91nTqtcR/iao4LU0VQuj1yliVsyWDkKagpVtBGLVghTEOL8bQ6r/kzPKXoKV5Q2TMXWLNq9KoTBUupvlEjT0QDUjL6WfR8P3dXbiq47VTij0jNAQlM8dCngBNOcFl1uBsN+K3SxrbtcbAmJ+IDu1muyXEG9vtSUXsMvP8KrvJzMLQWf5opmSo9RJbxcunO/lBr4mRebOyOSkOZ5cGHOgOMUJ89lYSprTwHJ+/VPNLghPJDnlStJ7294Oj/Vapeop4g6Q5nneRMNxOUbCV0F+Ul1WaGRyxK0+rL2dQtfvY08UfjILBQPebsjSAusaZ19n/e4HXhRqaWTV2dJhLMxqpyAn60Ri1Bqb5jnGTgDgK5fu/2R9Vj/EX+380D7x7uXYXxuQccAwzkW4LRX1qkbypCM42rzem1CCNAJB+RwbdXzGzAZRy8OttJgkFUwOUWRRuk7zDIaZNydpeQJu80u0V+PxUaR9QZO6b0FYvuAGtd86SeQceJWxc9yCP+C8=
